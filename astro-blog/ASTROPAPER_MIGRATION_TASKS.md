# AstroPaper移行タスクリスト

## 事前準備

### 1. 現状のバックアップとブランチ作成
- [ ] 現在の`master`ブランチの完全バックアップ
- [ ] `feature/migrate-to-astropaper`ブランチ作成
- [ ] 移行前の動作確認（`npm run build`）

### 2. AstroPaperテーマの準備
- [ ] AstroPaperリポジトリのクローン・検証
- [ ] AstroPaperの最新バージョン確認
- [ ] デモサイトでの機能確認

## フェーズ1: 基盤の移行

### 3. プロジェクト構造の移行
- [ ] AstroPaperテーマの新規インストール
- [ ] `package.json`の依存関係比較・マージ
- [ ] `astro.config.mjs`の設定移行
- [ ] `tailwind.config.mjs`の設定調整
- [ ] TypeScript設定の移行

### 4. 設定ファイルの移行
- [ ] `src/config.ts`にサイト設定を移行
- [ ] ソーシャルリンク設定の移行
- [ ] サイトメタデータ設定の移行
- [ ] RSS・Sitemap設定の確認

## フェーズ2: コンテンツの移行

### 5. ブログ記事のフォーマット変換
- [ ] 現在の49記事のfrontmatter形式をAstroPaper形式に変換
  - `pubDate` → `datetime`
  - `heroImage` → `ogImage`（必要に応じて）
  - `description` → `description`（そのまま）
  - `tags` → `tags`（そのまま）
- [ ] 記事内の画像パス調整
- [ ] 記事の動作確認（サンプル5記事程度）

### 6. 画像・アセットの移行
- [ ] `/public/assets/blog/` から適切な配置への移動
- [ ] 画像の最適化（必要に応じて）
- [ ] OGP画像の生成・設定

## フェーズ3: URL構造の調整

### 7. URL構造の統一化
- [ ] `/posts/` と `/blog/` の重複解消
- [ ] 統一されたURL構造の決定（`/posts/` または `/blog/`）
- [ ] リダイレクト設定の実装
- [ ] Internal linkの修正

### 8. SEO対策
- [ ] Sitemapの確認・調整
- [ ] robots.txtの確認
- [ ] 301リダイレクトの実装
- [ ] Google Search Consoleでの変更通知準備

## フェーズ4: 機能の実装・調整

### 9. 新機能の実装
- [ ] ファジー検索機能の設定
- [ ] 目次（TOC）機能の有効化
- [ ] ページネーション機能の設定
- [ ] タグページの機能確認・調整

### 10. デザイン・UI調整
- [ ] カラーテーマの調整（現在のLeaf Blueテーマに近づける）
- [ ] ダークモードの動作確認
- [ ] レスポンシブデザインの確認
- [ ] フォント・タイポグラフィの調整

### 11. カスタマイズ
- [ ] ロゴ・ファビコンの設定
- [ ] フッターのカスタマイズ
- [ ] ソーシャルリンクの設定
- [ ] 著者情報の設定

## フェーズ5: テスト・最適化

### 12. 動作テスト
- [ ] 全ページの表示確認
- [ ] 検索機能のテスト
- [ ] レスポンシブデザインのテスト
- [ ] ダークモード切り替えのテスト
- [ ] RSS・Sitemapの生成確認

### 13. パフォーマンス最適化
- [ ] Lighthouse スコアの測定・改善
- [ ] 画像の最適化確認
- [ ] ビルド時間の確認
- [ ] バンドルサイズの確認

### 14. SEO・アクセシビリティ確認
- [ ] メタタグの確認
- [ ] OGP画像の動作確認
- [ ] スクリーンリーダー対応の確認
- [ ] キーボードナビゲーションの確認

## フェーズ6: デプロイメント準備

### 15. 本番環境準備
- [ ] 本番ビルドのテスト
- [ ] 環境変数の確認
- [ ] デプロイスクリプトの調整
- [ ] DNS・CDN設定の確認

### 16. 移行戦略の実行
- [ ] リダイレクト設定のテスト
- [ ] 段階的デプロイメント計画
- [ ] ロールバック手順の準備
- [ ] 監視・エラー追跡の設定

## フェーズ7: 移行後フォローアップ

### 17. 移行後検証
- [ ] 全機能の動作確認
- [ ] 検索エンジンでのインデックス状況確認
- [ ] アクセス解析の継続性確認
- [ ] 外部リンクの動作確認

### 18. ドキュメント更新
- [ ] README.mdの更新
- [ ] 開発ドキュメントの更新
- [ ] デプロイメント手順の更新
- [ ] 今回の移行ログの作成

## 推定作業時間

| フェーズ | 推定時間 | 備考 |
|---------|---------|------|
| フェーズ1 | 2-3時間 | 基盤の移行 |
| フェーズ2 | 4-6時間 | 49記事の変換作業 |
| フェーズ3 | 2-3時間 | URL構造・SEO対策 |
| フェーズ4 | 3-4時間 | 機能実装・デザイン調整 |
| フェーズ5 | 2-3時間 | テスト・最適化 |
| フェーズ6 | 1-2時間 | デプロイメント準備 |
| フェーズ7 | 1-2時間 | 移行後フォローアップ |
| **合計** | **15-23時間** | **土日2日間での完了可能** |

## リスク要因

### 高リスク
- [ ] **URL構造変更によるSEO影響** - 適切なリダイレクト設定で対応
- [ ] **既存記事のフォーマット変換エラー** - 段階的テストで確認

### 中リスク
- [ ] **画像パスの変更による表示エラー** - 一括置換ツールで対応
- [ ] **カスタムスタイルの互換性問題** - AstroPaper標準スタイルへの調整

### 低リスク
- [ ] **新機能の学習コスト** - AstroPaperのドキュメント参照
- [ ] **デプロイメント設定の調整** - 既存設定の流用可能

## 成功指標

- [ ] Lighthouse スコア: 95+（全項目）
- [ ] 全49記事の正常表示
- [ ] 検索機能の正常動作
- [ ] SEOランキングの維持
- [ ] ページ読み込み速度の改善

---

**次のステップ**: このタスクリストを確認し、実際の移行作業を開始する前に不明点や追加要件があれば相談してください。