---
import { SITE_TITLE, SOCIAL_LINKS } from '../consts';
---

<header class="border-b border-skin-line/20 mb-12">
  <div class="mx-auto max-w-5xl px-6 py-8">
    <div class="flex items-center justify-between">
      <a href="/" class="text-3xl font-bold text-skin-base hover:text-skin-accent transition-colors">
        {SITE_TITLE}
      </a>
      
      <nav class="flex items-center gap-8">
        <div class="hidden sm:flex items-center gap-8">
          <a href="/posts" class="text-lg text-skin-base hover:text-skin-accent transition-colors font-medium">Posts</a>
          <a href="/tags" class="text-lg text-skin-base hover:text-skin-accent transition-colors font-medium">Tags</a>
          <a href="/search" class="text-lg text-skin-base hover:text-skin-accent transition-colors font-medium">Search</a>
          <a href="/about" class="text-lg text-skin-base hover:text-skin-accent transition-colors font-medium">About</a>
        </div>
        
        <div class="flex items-center gap-4">
          <a 
            href={SOCIAL_LINKS.github} 
            target="_blank"
            class="text-skin-base hover:text-skin-accent transition-colors"
            aria-label="GitHub"
          >
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
            </svg>
          </a>
          
          <a 
            href={SOCIAL_LINKS.rss} 
            target="_blank"
            class="text-skin-base hover:text-skin-accent transition-colors"
            aria-label="RSS Feed"
            title="RSS Feed"
          >
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
              <path d="M6.503 20.752c0 1.794-1.456 3.248-3.251 3.248S0 22.546 0 20.752s1.456-3.248 3.252-3.248 3.251 1.454 3.251 3.248zm-6.503-12.572v4.811c6.05.062 10.96 4.966 11.022 11.009h4.817c-.062-8.71-7.118-15.758-15.839-15.82zm0-3.368c10.58.046 19.152 8.594 19.183 19.188h4.817c-.03-13.231-10.755-23.954-24-24v4.812z"/>
            </svg>
          </a>
          
          <button
            id="theme-btn"
            class="text-skin-base hover:text-skin-accent transition-colors"
            title="Toggle theme"
            aria-label="Toggle theme"
          >
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" id="sun-svg">
              <path d="M6.993 12c0 2.761 2.246 5.007 5.007 5.007s5.007-2.246 5.007-5.007S14.761 6.993 12 6.993 6.993 9.239 6.993 12zM12 8.993c1.658 0 3.007 1.349 3.007 3.007S13.658 15.007 12 15.007 8.993 13.658 8.993 12 10.342 8.993 12 8.993zM10.998 19h2v3h-2zm0-17h2v3h-2zm-9 9h3v2h-3zm17 0h3v2h-3zM4.219 18.363l2.12-2.122 1.415 1.414-2.12 2.122zM16.24 6.344l2.122-2.122 1.414 1.414-2.122 2.122zM6.342 7.759 4.22 5.637l1.415-1.414 2.12 2.122zm13.434 10.605-1.414 1.414-2.122-2.122 1.414-1.414z"/>
            </svg>
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" id="moon-svg" style="display: none;">
              <path d="M20.742 13.045a8.088 8.088 0 0 1-2.077.271c-2.135 0-4.14-.83-5.646-2.336a8.025 8.025 0 0 1-2.064-7.723A1 1 0 0 0 9.73 2.034a10.014 10.014 0 0 0-4.489 2.582c-3.898 3.898-3.898 10.243 0 14.143a9.937 9.937 0 0 0 7.072 2.93 9.93 9.93 0 0 0 7.07-2.929 10.007 10.007 0 0 0 2.583-4.491 1.001 1.001 0 0 0-1.224-1.224zm-2.772 4.301a7.947 7.947 0 0 1-5.656 2.343 7.953 7.953 0 0 1-5.658-2.344c-3.118-3.119-3.118-8.195 0-11.314a7.923 7.923 0 0 1 2.06-1.483 10.027 10.027 0 0 0 2.89 7.848 9.972 9.972 0 0 0 7.848 2.891 8.036 8.036 0 0 1-1.484 2.059z"/>
            </svg>
          </button>
        </div>
        
        <!-- Mobile menu button -->
        <button 
          class="sm:hidden text-skin-base hover:text-skin-accent transition-colors"
          aria-label="Menu"
          onclick="toggleMobileMenu()"
        >
          <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
            <path d="M3 12h18m-9-9v18"/>
          </svg>
        </button>
      </nav>
    </div>
    
    <!-- Mobile menu -->
    <div id="mobile-menu" class="hidden sm:hidden mt-4 pt-4 border-t border-skin-line/20">
      <div class="flex flex-col gap-4">
        <a href="/posts" class="text-lg text-skin-base hover:text-skin-accent transition-colors font-medium">Posts</a>
        <a href="/tags" class="text-lg text-skin-base hover:text-skin-accent transition-colors font-medium">Tags</a>
        <a href="/about" class="text-lg text-skin-base hover:text-skin-accent transition-colors font-medium">About</a>
      </div>
    </div>
  </div>
</header>

<script>
  function toggleMobileMenu() {
    const menu = document.getElementById('mobile-menu');
    menu?.classList.toggle('hidden');
  }

  // テーマ切り替え機能
  function initTheme() {
    const themeBtn = document.getElementById('theme-btn');
    const html = document.documentElement;
    const sunSvg = document.getElementById('sun-svg');
    const moonSvg = document.getElementById('moon-svg');

    // 初期テーマの設定
    const savedTheme = localStorage.getItem('theme') || 'light';
    html.setAttribute('data-theme', savedTheme);
    updateThemeIcons(savedTheme);

    // テーマ切り替えイベント
    themeBtn?.addEventListener('click', () => {
      const currentTheme = html.getAttribute('data-theme');
      const newTheme = currentTheme === 'light' ? 'dark' : 'light';
      
      html.setAttribute('data-theme', newTheme);
      localStorage.setItem('theme', newTheme);
      updateThemeIcons(newTheme);
    });

    function updateThemeIcons(theme: string) {
      if (theme === 'light') {
        sunSvg!.style.display = 'block';
        moonSvg!.style.display = 'none';
      } else {
        sunSvg!.style.display = 'none';
        moonSvg!.style.display = 'block';
      }
    }
  }

  // DOMContentLoaded時にテーマを初期化
  document.addEventListener('DOMContentLoaded', initTheme);
</script>
