<!DOCTYPE html>
<html lang="en" dir="auto">

<head>
	<meta name="generator" content="Hugo 0.146.6"><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>jarinosuke blog</title>
<meta name="keywords" content="blog, ios">
<meta name="description" content="jarinosuke blog">
<meta name="author" content="jarinosuke">
<link rel="canonical" href="http://localhost:1313/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css" integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF&#43;13Dyqob6ASlTrTye8=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="http://localhost:1313/index.xml">
<link rel="alternate" hreflang="en" href="http://localhost:1313/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="jarinosuke blog (Alt + H)">jarinosuke blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/" title="Home">
                    <span class="active">Home</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/posts/" title="Posts">
                    <span>Posts</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main"> 

<article class="first-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">最近読んだもの13 - Swift Concurrencyなど
    </h2>
  </header>
  <div class="entry-content">
    <p> How Does Swift Concurrency Prevents Thread Explosions? 最近読んだもの8 - Swift Concurrency、 Swifty CLI などでも挙げた Swift Concurrency における thread explosion についての詳細 Thread Explosion とは CPU core 数に対して16倍以上のスレッドが走っている状態 GCD 自体は Thread explosion を抑制する機能はないので簡単に引き起こすことができる Swift Concurrency で Task.init(priority:operation:) で同様のことをする priority は .userInitiated .utility .background の3種類で優先度順 .userInitiated だと CPU コア数分の thread を作成している、それぞれ “com.apple.root.user-initiated-qos.cooperative“ という queue に対して上限 thread 数を設けている .utility .background は .userInitiated の Task が実行されている場合は1つまでしか thread が実行されないなど色々なテストがされていた Five ways to break Swift Concurrency @MainActor が backgroud thread など他の thread から呼ばれる可能性があるコードのまとめ selector や notification 経由など SwiftUI だと DateFormatter がなくても Text のみで日付のフォーマットを変えられるという tweet Swift 5.8 から closure 内で weakify した self を unwrap したら、その後は暗黙的に扱えるようになったという tweet Task Groups in Swift explained with code examples Task Group のユースケースごとの紹介 DispatchGroup のモダンな形くらいの認識しかなかったのでありがたい UIViewConroller.viewIfLoaded というメソッド iOS9 からあるよという tweet </p>
  </div>
  <footer class="entry-footer"><span title='2023-01-23 09:00:00 +0000 UTC'>2023-01-23</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;jarinosuke</footer>
  <a class="entry-link" aria-label="post link to 最近読んだもの13 - Swift Concurrencyなど" href="http://localhost:1313/posts/%E6%9C%80%E8%BF%91%E8%AA%AD%E3%82%93%E3%81%A0%E3%82%82%E3%81%AE13-swift-concurrency%E3%81%AA%E3%81%A9/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">最近読んだもの12 - ジャイロを使ったホログラム効果、Foundation OSS 化など
    </h2>
  </header>
  <div class="entry-content">
    <p> Mimicking a Holographic Effect for Mercard アプリ上のメルカードで使われているジャイロスコープを使ったホログラム効果の解説記事 ジャイロからリアルタイムで端末の傾きがとれるのでそれを用いてホログラムを更新する その際に色の表現は HSB Model が適していた init(hue:saturation:brightness:alpha:) 余計な電力消費などが出ないように注意した data collection を 60fps に制限した Low Power Mode の時はホログラムを disable にした payment tab が active かつ visible なときのみ効果を適用 QA も色々な端末で行った Using complex gestures in a SwiftUI ScrollView SwiftUI で ScrollView 上で複雑な gesture を扱う方法 Swift Enum With Labeled Associated Values Enum の assoc values はラベルが付けられるという記事 iOS In-App Subscription Tutorial with StoreKit 2 and Swift StoreKit 2 を使った IAP 実装チュートリアル 5年くらい前に実装した時と比較してセットアップ周りがだいぶ変わったなという印象 StoreKit configuration file は良さそう AppStore Connect も REST API ができたようなので、reneweal や restore の処理なども起動時に行わなくてよくなったのかな？ The Future of Foundation Foundation framework が Swift で書き直され OSS 化される 今までは Swift は OSS だったが、そこで使われる Foundation は以前からある C で実装されたものをラップして扱っていた </p>
  </div>
  <footer class="entry-footer"><span title='2022-12-19 09:00:00 +0000 UTC'>2022-12-19</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;jarinosuke</footer>
  <a class="entry-link" aria-label="post link to 最近読んだもの12 - ジャイロを使ったホログラム効果、Foundation OSS 化など" href="http://localhost:1313/posts/%E6%9C%80%E8%BF%91%E8%AA%AD%E3%82%93%E3%81%A0%E3%82%82%E3%81%AE12-%E3%82%B8%E3%83%A3%E3%82%A4%E3%83%AD%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%9F%E3%83%9B%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E5%8A%B9%E6%9E%9Cfoundation-oss-%E5%8C%96%E3%81%AA%E3%81%A9/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">最近読んだもの11 - アプリの肥大化軽量化、秘匿情報管理など
    </h2>
  </header>
  <div class="entry-content">
    <p> Secret Management on iOS iOS アプリで情報を秘匿した場合に取りうる方法とその pros/cons まとめ 結構昔の記事だけどまた news letter で流れてきたので改めて読んだ コード内に直接埋め込む、 .xcconfig など外部ファイルに入れる、 GYB を使ってコード生成する、などが挙げられている When .animation animates more (or less) than it’s supposed to .animation() modifier が nest されている場合に、コントロールが難しいという記事 並列で並ぶ分には期待通りになるが nest されていると難しいらしい 宣言的に書くアニメーションは確かにまた違った難易度 Introduction to SwiftUI Modularisation with SPM SPM のパッケージ単位でモジュール分割する方法 Combining opaque return types with primary associated types Swift 5.7 で導入された primary associated type の説明 AnyPublisher を some Publisher に書き換えた時に生じる問題を例に挙げていてわかりやすかった some をつけながらも指定されている assoc type を指定することができるようになった Pin a view to the bottom of safe area in SwiftUI テキスト入力フィールドなどで、safe area の bottom に張り付いているような view をどのように作ればいいか safeAreaInset(edge:alignment:spacing:content:) modifier を使うと、使われた view に対して紐づいてくれる How Xcode 14 unintentionally increases app size Xcode 14 から Bitcode の設定がデフォルトでOFFになった Bitcodeが元々ONだったプロジェクトの場合は問題なさそう？だが、OFFのプロジェクトの場合は strip の設定が正しくされていないとアプリサイズが増えてしまう問題がある How I made my app 73% lighter 大きい画像を pdf で xcasset に追加していると、Xcode はそれを @1x として @2x @3x 向けの png を生成するのでアプリサイズが大きくなってしまう </p>
  </div>
  <footer class="entry-footer"><span title='2022-11-30 09:00:00 +0000 UTC'>2022-11-30</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;jarinosuke</footer>
  <a class="entry-link" aria-label="post link to 最近読んだもの11 - アプリの肥大化軽量化、秘匿情報管理など" href="http://localhost:1313/posts/%E6%9C%80%E8%BF%91%E8%AA%AD%E3%82%93%E3%81%A0%E3%82%82%E3%81%AE11-%E3%82%A2%E3%83%97%E3%83%AA%E3%81%AE%E8%82%A5%E5%A4%A7%E5%8C%96%E8%BB%BD%E9%87%8F%E5%8C%96%E7%A7%98%E5%8C%BF%E6%83%85%E5%A0%B1%E7%AE%A1%E7%90%86%E3%81%AA%E3%81%A9/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">最近読んだもの10 - 気まずい1:1
    </h2>
  </header>
  <div class="entry-content">
    <p> The Art of the Awkward 1:1 1:1 は気まずいものでないと意味がないという記事 やや釣りタイトルではあるものの、納得感あった 1:1 は双方が複雑で不確実なもの（感情、希望、恐れなど）を扱うのに適した場 逆に議論が必要ないものを話す場としては最悪 よくある 1:1 での無駄 軽いアップデート、軽いフィードバック、軽い不満など 確かに価値はあるが、貴重な1:1な時間を使う必要がない その時に自分自身に「この会話はハードだったか？」と聞くべき 言いたいことを言う時に不安だったり確信がなかったりしたか？気まずかったか？ 気まずくなかったら本当のことは話せていない 例えばバーンアウト気味だとか、転職考えてるとか、思った通りに成長できていないとか 良くある例として、馬鹿っぽくなるから良くないことを言わなくなりがち 1:1 の全ての時間を気まずくする必要はない ただ1回のMTGで一定量の気まずさは持って行くべき これが繰り返し起こる問題やサイクルを断ち切る ガードを緩めて本当の信頼につながる 変化や成長はいつも気まずいもの 以前は伝染病のように気まずい会話を嫌っていた 非常に重要な 1:1 の時間を失っていることに徐々に気づいていった 気まずい 1:1 のためのルール 1: オープンな場で議論できるトピックは何も話さない 2: 毎回の 1:1 で気まずいことを一つ話すことにコミットする、相手も 事前にお互いで合意しておくのがいい コミットするとピアプレッシャーも効いてうまく行く 気まずい話題の例 メタ・感情 フィードバック アドバイス Awkward 1:1s: How To Get Honest Feedback ^の続編、フィードバックのもらい方について 「フィードバックください」と言ってもなかなかすぐにもらえるわけではない 信頼関係を作るのがまず大事というアドバイスはよくあるけどあまり助けにはならないよね フィードバックの会話そのものを通して信頼関係を作るといい 人から真実を引き出したいときは会話を自分ではなく彼らが快適な方向で進めるのがいい 信頼関係がない状態でフィードバックを与えるのってリスクを感じるのでそれを減らす How Make it safe Make it easy Make it reward </p>
  </div>
  <footer class="entry-footer"><span title='2022-11-21 09:00:00 +0000 UTC'>2022-11-21</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;jarinosuke</footer>
  <a class="entry-link" aria-label="post link to 最近読んだもの10 - 気まずい1:1" href="http://localhost:1313/posts/%E6%9C%80%E8%BF%91%E8%AA%AD%E3%82%93%E3%81%A0%E3%82%82%E3%81%AE10-%E6%B0%97%E3%81%BE%E3%81%9A%E3%81%8411/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">最近読んだもの9 - SwiftUI Localization、StateObject、EnvironmentObject など
    </h2>
  </header>
  <div class="entry-content">
    <p> Check localizable strings with the accented pseudolanguage in Xcode SwiftUI での文言ローカライズについて SwiftUI ではいくつかローカライズ文言用のキー定義の方法がある まず Text() に渡す string literal は 暗黙的に LocalizedStringKey になっているのでローカライズされる また String も String(localized:) で initialize すればそのローカライズされる Xcode の scheme 設定で App Language に Accented PseudoLanguage という選択肢がある これを設定するとローカライズされていない文言が分かりやすくなる（ローカライズされている文言は架空の文字列になる） Should we manually call @StateObject initializer @StateObject を初期値ではなく、 StateObject(wrappedValue:) を使って初期化するのは大丈夫なのか？という記事 例えば初期化時に何かパラメータが必要なものなど動的にしたいなど 結論 initializer の中でなら問題ないが副作用に注意らしい Animated Launch Screen in SwiftUI Splash screen と TOP 画面でどのように画面遷移を自動（通信完了と同時に dimiss）させるか @EnvironmentObject を使って app top で持っている @StateObject を inject しているのが勉強になった When does a SwiftUI Environment get retained? SwiftUI の EnvironmentObject がどのようにメモリ上で持たれているかの記事 leak している view に .environmentObject() するとそれに引きずられて leak するという話 Running Code Only Once in SwiftUI 画面表示時など、一度だけ実行させたいコードがある状況は良く出てくる 例えば .onAppear だと画面が push/pop すると再度呼ばれてしまう この記事では .onFirstAppear という extension を作って、その内部で FirstAppear という ViewModifier を用意しそこで flag 管理することで解決していた How to check for network connection and present an alert in SwiftUI NWPathMonitor を使った ObservableObject を作り、それを @EnvironmentObject として application の最上位から inject する方法 子 View に関しては @EnvironmentObject すれば該当のオブジェクトを取得できるので便利 Share files between your iOS app, Widget and WatchKit extensions iOS の sandboxed な環境下で App Extension 間でどのようにファイルを共有するか WatchKit Extension だと session という概念を通じてやりとりするのは知らなかった Improve App Launch Time 2022 Edition 環境変数 DYLD_PRINT_STATISTICS は動かなくなった 代わりに Instruments の App Launch テンプレートで計測できるようになった Debug ではなく Release ターゲットで計測するようにする Test 用の Target テンプレートである UI Testing Bundle を使うと起動時間を計測するテストが予め含まれている Xcode Organizer にある Launch Time metrics も有効 </p>
  </div>
  <footer class="entry-footer"><span title='2022-11-14 09:00:00 +0000 UTC'>2022-11-14</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;jarinosuke</footer>
  <a class="entry-link" aria-label="post link to 最近読んだもの9 - SwiftUI Localization、StateObject、EnvironmentObject など" href="http://localhost:1313/posts/%E6%9C%80%E8%BF%91%E8%AA%AD%E3%82%93%E3%81%A0%E3%82%82%E3%81%AE9-swiftui-localizationstateobjectenvironmentobject-%E3%81%AA%E3%81%A9/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">最近読んだもの8 - Swift Concurrency、 Swifty CLI など
    </h2>
  </header>
  <div class="entry-content">
    <p> Presenting Sheets: Item, or a Boolean Binding? List 内のコンテンツを sheet などで表示する場合、sheet(isPresented:onDismiss:content:) よりも sheet(item:onDismiss:content:) の方が管理する State が減るので良いという話 Create a Card with an Image Outside its Bounds in SwiftUI ある View の中の View を一部はみ出させて表示したい場合 SwiftUI でどうやるのかの話 UIKit であれば bounds ベースでレイアウトを組んで実現できた SwiftUI だと以下の2つの方法が主に挙げられていた ZStack でラップする この content 内で padding をうまいこと指定する overlay(alignment:content:) modifier を使う overlay modifier の content 内ではみ出させる View を扱う Swift Concurrency – Things They Don’t Tell You async await などを使った Concurrency を扱うときによくハマる問題がまとめられていた async await すればいいだけと言われてるけどそんなに単純じゃないよ 自分がハマったり勘違いしていた点も入っていたのでかなり有用 例えば async な function を await した後の thread は、する前の処理 thread と同じにはならない可能性がある。など 解決策としては async な function が main thread で走ることを保証したい場合は常に @MainActor で annotate する それが難しい場合、 function 内部で main thread で走ってほしい処理を await MainActor.run {} する actor の Actor Reentrancy などもとても参考になった Task {} についても勉強になった Task {} で引数になる closure は user-initiated な concurrent queue に dispatch される Swift Concurrency は CPU core 数を超えないように queue 毎の thread 数を制限しているので、それを超えてしまうと Task が suspend する Creating a Swifty Command-Line Tool With ArgumentParser swift-argument-parser を使って簡単に CLI ツールを Swift で作る方法 argument や flag などに property wrapper が使われていたりとモダンに手軽に書けそうだなと思った </p>
  </div>
  <footer class="entry-footer"><span title='2022-11-07 09:00:00 +0000 UTC'>2022-11-07</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;jarinosuke</footer>
  <a class="entry-link" aria-label="post link to 最近読んだもの8 - Swift Concurrency、 Swifty CLI など" href="http://localhost:1313/posts/%E6%9C%80%E8%BF%91%E8%AA%AD%E3%82%93%E3%81%A0%E3%82%82%E3%81%AE8-swift-concurrency-swifty-cli-%E3%81%AA%E3%81%A9/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">最近読んだもの7 - 非同期コミュニケーション、Mobile Developer Experience
    </h2>
  </header>
  <div class="entry-content">
    <p> Asynchronous Communication is the Great Leveler in Engineering Shopify のエンジニアによるリモートワーク環境下における非同期コミュニケーションについての記事 コミュニケーションのタイプによって同期・非永続的と非同期・永続的で分けられてる図が面白かった チャットが同期的な方に入ってるのは確かに、と思った ある程度送る側が読まれることを期待していて、さらに返信がリーズナブルな期間で返ってくると思っている 非同期コミュニケーションはリモートワークを効率的にするだけではなく色々なものが永続的になっていくので、適切に行えばどんどんレバレッジがかかっていく 全社ではなくチーム内でリモートワークでの標準を決めるのもいいなと思った Mobile Developer Experience at Slack Developer pain をリストアップして、それぞれにかかる時間と時給から年間コスト出すのがとても良い そしてこれはチームサイズが大きければ大きいほどコスト増になっていく アプローチ方法で興味深かったもの　feature チームのmobile engineer と partner になって一緒に開発し、何が大変なのか観察する NPS など mobile engineer 向けにサーベイを行う ペインポイントを解決する前に metrics を集める Developer pain iOS での CI のビルド時間 最初 iOS は Bluepill を使ってテストの並列化を行った それで一時期は20分くらいまで減ったが、再度50分近くまで増えた 次のアプローチとして Bazel で cache layer を作る方法をとった bazel-diff を使って、2 revison 間に bazel cache の差分があるかどうかの検知もできる これによって平均9分、最小だと4.5分のTTM(Time to merge) まで下げることができた Android での Test 関連の失敗 Automated なブラックボックステストを入れていたが、テストが増えるにつれてより flaky になった 一度失敗すると修正するために Automation Engineer に連絡しないといけず、 TTM が増加する傾向があった 詳細はこちら Handling Flaky Tests at Scale: Auto Detection &amp; Suppression iOS での merge conflict XcodeGen を導入して対応 Bazel 導入により、動的に XcodeGen 用の YAML ファイルを生成している Aviator を使って merge queue の管理と自動化を実現している </p>
  </div>
  <footer class="entry-footer"><span title='2022-10-31 09:00:00 +0000 UTC'>2022-10-31</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;jarinosuke</footer>
  <a class="entry-link" aria-label="post link to 最近読んだもの7 - 非同期コミュニケーション、Mobile Developer Experience" href="http://localhost:1313/posts/%E6%9C%80%E8%BF%91%E8%AA%AD%E3%82%93%E3%81%A0%E3%82%82%E3%81%AE7-%E9%9D%9E%E5%90%8C%E6%9C%9F%E3%82%B3%E3%83%9F%E3%83%A5%E3%83%8B%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3mobile-developer-experience/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">最近読んだもの6 - SwiftUI 関連
    </h2>
  </header>
  <div class="entry-content">
    <p> What are Sendable and @Sendable closures in Swift? 以前よりは Sendable に関する理解が高くなった actor はデフォルトで Sendable closure に @Sendable をつけると、その中で capture された値が Sendable でない場合は warning になる（設定が必要） struct は暗黙的に Sendable になっている（ただしプロパティ全てが Sendable なら） 同様に class でもそれが final なら Sendable Conditional layouts in SwiftUI iOS 16 から Layout protocol が導入された conditional に layout を変えたい場合、 AnyLayout を使ってより綺麗に書けるようになった Structural identity in SwiftUI conditional body の場合、 some View は _ConditionalContent&lt;LoggedUser, AnonymousUserView&gt; などになる 予期せぬ recreation や animation が発生することがある inline modifier などで structure identity を保持するのがいい Pitfall of Nested ObservableObject nest された ObservableObject だと変更が通知されないので、マニュアルで発火させないといけない onTapGesture(count:coordinateSpace:perform:) iOS 16 から SwiftUI でも tap gesture を SwiftUI.View 単位につけることができるようになった Mastering NavigationStack in SwiftUI. Navigator Pattern. NavigationView は deprecated になり、iOS 16 から NavgationStack が登場した navigationDestination(for:destination:) で遷移先を統一的に書けるように Mastering NavigationStack in SwiftUI. NavigationPath. Three Ways to Refactor Massive SwiftUI Views SwiftUI の View が大きくなった時の分割、リファクタリングの方法 </p>
  </div>
  <footer class="entry-footer"><span title='2022-10-24 09:00:00 +0000 UTC'>2022-10-24</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;jarinosuke</footer>
  <a class="entry-link" aria-label="post link to 最近読んだもの6 - SwiftUI 関連" href="http://localhost:1313/posts/%E6%9C%80%E8%BF%91%E8%AA%AD%E3%82%93%E3%81%A0%E3%82%82%E3%81%AE6-swiftui-%E9%96%A2%E9%80%A3/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">最近読んだもの5 - 世界史独学、Team Topologies など
    </h2>
  </header>
  <div class="entry-content">
    <p> 【推薦書リスト】世界史独学のための100冊 前置き 最近世界史にと興味が出てきて、高校時代に読んだ詳説世界史BやCOTEN RADIO を読んだり聴いたりして、一通り浅いなりに全体像が見えた気になってきた 歴史シミュレーションゲームをやる中で特定の時代や人物（今回の場合だと古代ローマ）をもっと知りたいと思い関連書籍を調べる中で興亡の世界史という本が良さそうとなった レビューをまず読みたいと思い出会ったのがこの記事 書籍の難易度に対する分類が分かりやすかった 難易度は「固有名詞の量」と、「前提とするレベル」の2軸で分けられている 固有名詞の量についてはある程度の専門書を読んで挫折した人なら誰でも経験があるなと思った 一定の語句を暗記する(「既知」を蓄える、という言葉がストレートに分かりやすかった)ステップをまず踏むのが世界史だけでなく役に立つのは個人的にも理解できる 膨大な引用されてる書籍があるので、これを軸に色々つまみ食いしていけると良い Team Topoligies 前から気になってはいたが、 74. PMFしているスタートアップがスケールする上での組織課題と解法 w/ kameike fukabori.fm を聞いて今更読み始めた まだ絶賛読み途中なので、読み終わったら別でまとめたい 以前読んだ An Elegant Puzzle: 2 Organizations のメモ でも出てきたような話もあり、つながりを感じてとても面白い ジョナサン・ハイトが解き明かす「アメリカ社会がこの10年で桁外れにバカになった理由」 成功した民主主義国家を集団的に統一するものとして、社会学者は少なくとも3つの主要な力を特定してきた。社会関係資本（高水準の信頼に基づく広範囲の社会的ネットワーク）、強固な諸制度、そして共有される物語だ。
ソーシャルメディアは、これら3つすべてを弱体化した。
一部有料会員限定なので、全ては読めてないけどこの一文はとても印象的だった </p>
  </div>
  <footer class="entry-footer"><span title='2022-06-27 09:00:00 +0000 UTC'>2022-06-27</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;jarinosuke</footer>
  <a class="entry-link" aria-label="post link to 最近読んだもの5 - 世界史独学、Team Topologies など" href="http://localhost:1313/posts/%E6%9C%80%E8%BF%91%E8%AA%AD%E3%82%93%E3%81%A0%E3%82%82%E3%81%AE5-%E4%B8%96%E7%95%8C%E5%8F%B2%E7%8B%AC%E5%AD%A6team-topologies-%E3%81%AA%E3%81%A9/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2 class="entry-hint-parent">&#39;物語 ウクライナの歴史―ヨーロッパ最後の大国&#39; を読んだ
    </h2>
  </header>
  <div class="entry-content">
    <p>読んだ動機 ロシアによるウクライナへの侵攻が2月末頃からはじまった。
すぐその後にCOTEN RADIOで【緊急収録】ウクライナとロシア 1/6　～ウクライナとロシアの歴史～が公開された。
それを聴いて全体像を浅く把握できたかなと思うと同時に、これを全て鵜呑みにしてしまってもそれはそれでバイアスだなという課題感を持った（この見方自体も Podcast 内で警告があった）。
なので、COTEN RADIO が提供している引用書籍で紹介されているかつ、読みやすそうなものを手に取ってみた
今回読んだ物語 ウクライナの歴史―ヨーロッパ最後の大国もそうだけど、COTEN RADIO を支える COTEN CREW 然り、資料を読んで発信してくれる方々全て感謝したいし尊い取り組みだなぁと改めて感じた。
こういう方々の活動全てが、今後の歴史を積み上げて作っていくんだなと思った。
（なるべく書籍に書かれてある事実と自身の意見は分けて書こうと努力はしてますが、間違いなどある場合はご容赦ください）。
引用とノート ウクライナ史の権威オレスト・スブテルニーは、ウクライナ史の最大のテーマは、「国がなかったこと」だとしている。すなわち、多くの国において歴史の最大のテーマがネーション・ステート（民族国家）の獲得とその発展であるのに比し、ウクライナでは国家の枠組なしで民族がいかに生き残ったかが歴史のメーン・テーマであった (p. 5)
序文からとても印象的で、ウクライナに関連する人々は国家という枠組み無しでどうやって生きてきたかの歴史になるというのが驚きだった。
1. スキタイ文明と日本神話 王権を正統化する黄金の鋤、軛、戦斧、盃が天から降ってきたとの話に関して、神話学者の大林太良氏、吉田敦彦氏らが、スキタイ神話が朝鮮半島を経由して日本まで伝播した可能性を指摘し、スキタイの器物が日本の皇統を正統化する三種の神器に対応するのではないかと推測しているのは興味深い。 (p. 19)
元々黒海北岸に住んでいたのはキンメリア人らしいが詳細が分かっていない。
その人々を追い出して土着したのがスキタイ人、彼らの建国伝説の中で金属製の器が4つあるがそれが日本神話の3種の神器とリンクしている、なんなら輸入されている可能性もあるのでは？という推察。
そんなことあったら素敵な推論だなと思った。
我々が気づくのは、このユーラシア大平原ではその後二〇〇〇年以上たってもほぼ同じことが繰り返されている点である (p. 26)
騎馬術が高く戦闘能力の高かったスキタイ人のペルシャ帝国の遠征からの防衛の話。
そこから1800年代のナポレオン遠征、1900年代のナチス・ドイツのソ連への侵攻、そして直近のロシア侵攻と何度も侵攻に晒されている。
中国で王権の象徴になるのは黄金ではなく「玉」であるのに、朝鮮半島の金冠塚（韓国慶州市）、我が国の藤ノ木古墳（奈良県斑鳩町）から見事な黄金（または金色）の冠が発見されたことについて、これは黄金崇拝の観念が「玉の国」である中国本土を通らずに、北方草原から回して伝播した可能性があると指摘している。 (p. 31)
こちらもスキタイ文明と日本のリンクの推察。
こんな繋がりがあったとしたらワクワクする。
2. キエフ・ルーシは誰のもの ロシア側の言い分はこうである。キエフ公国の滅亡後、ウクライナの地はリトアニアやポーランドの領土となり、国そのものが消滅してしまって、継承しようにも継承者がいなくなってしまった。これに対し、キエフ・ルーシ公国を構成していたモスクワ公国は断絶することなく存続して、キエフ・ルーシ公国の制度と文化を継承し、その後のロシア帝国に発展していった。これからみてもロシアがキエフ・ルーシ公国の正統な継承者であることにはいまさら議論の余地はない。 (p. 40)
ウクライナのナショナリストの言い分はこうである。モスクワを含む当時のキエフ・ルーシ公国の東北地方は民族・言語も違い、ようやく一六世紀になってフィン語に代わってスラヴ語が使われるようになったほどであった。一五世紀のモスクワは、キエフ・ルーシ公国の支配下にあった非スラヴ諸部族の連合体であり、キエフ・ルーシ公国の後継者とはとても言いがたい。また過酷な専制中央集権のロシア・ソ連のシステムはキエフ・ルーシ公国のシステムとはまったく異なり、別系統の国である (p. 40)
今までキエフ・ルーシ公国はロシア（ソ連）史の文脈で出てくることが多かったのは、ウクライナは独立さえしていなかったから。
しかし独立したことでウクライナも一つの独立国、として考えるとこのキエフ・ルーシ公国は誰のものか、という議論になってきた。
この辺りは現状なかなかセンシティブな話題になりうるので、改めて事実とそれぞれの認識をノートとして書いておく。
キエフ・ルーシ公国を作ったのは東スラブ人 東スラブ人は現在のロシア人、ウクライナ人、ベラルーシ人の先祖となる 8世紀頃ヴァイキングの登場 ヴァイキングは自身のことをルーシと呼んだ リューリクがルーシの首長になる ルーシの継承方式が曖昧（兄弟相続と父子相続のmix）で衰退 その中でヴォロディミールは各地の制服の成功、キリスト教を国境にし聖公と呼ばれる ヤロスラフはキエフ大公、内政に長けており賢公とも呼ばれる キエフ・ルーシ公国はキリスト教化 ビザンツ文化を吸収 ギリシャ正教を選択したことが後世ロシアや西欧諸国・ポーランドとの断絶を生むきっかけの一つ 12世紀頃から衰退の時期 諸公国の連合体のような形になる 代表的なのがモスクワ公国, ハーリチ・ヴォルイニ公国 モンゴルによる制服と「タタールのくびき」が始まる 「タタールのくびき」はロシア史視点なので盛られている可能性があるらしい？ モスクワ公国はタタールに統治された ハーリチ・ヴォルイニ公国 キエフ陥落後も1世紀近く存続、現在のウクライナにとっても重要 ウクライナはキエフ・ルーシ公国の直系と主張している根拠がこれ ここからタタールはじめ各国の干渉を防ぐが、最終的にリトアニアとポーランドに並行される 13世紀半ば~17世紀半ばは空白 リトアニアとポーランドがキエフ・ルーシ公国だったところを支配 モスクワ大公国、ポーランド公国、リトアニア公国と分けた ウクライナという地名が生まれたのもこの時期 ウクライナの地は、古代からクリミアを通じてギリシア・ローマ（その後のイタリア）世界および海の世界とつながっているのである。この開放性は、他のスラヴ諸国の歴史が内陸的な印象を与えるのとは対照的に、ウクライナの大きな特色である。
...</p>
  </div>
  <footer class="entry-footer"><span title='2022-06-20 09:00:00 +0000 UTC'>2022-06-20</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;jarinosuke</footer>
  <a class="entry-link" aria-label="post link to &#39;物語 ウクライナの歴史―ヨーロッパ最後の大国&#39; を読んだ" href="http://localhost:1313/posts/%E7%89%A9%E8%AA%9E-%E3%82%A6%E3%82%AF%E3%83%A9%E3%82%A4%E3%83%8A%E3%81%AE%E6%AD%B4%E5%8F%B2%E3%83%A8%E3%83%BC%E3%83%AD%E3%83%83%E3%83%91%E6%9C%80%E5%BE%8C%E3%81%AE%E5%A4%A7%E5%9B%BD-%E3%82%92%E8%AA%AD%E3%82%93%E3%81%A0/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="next" href="http://localhost:1313/page/2/">Next&nbsp;&nbsp;»
    </a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">jarinosuke blog</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
